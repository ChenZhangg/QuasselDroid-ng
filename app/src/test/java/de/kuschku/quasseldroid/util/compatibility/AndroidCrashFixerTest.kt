package de.kuschku.quasseldroid.util.compatibility

import org.junit.Assert.assertFalse
import org.junit.Test

class AndroidCrashFixerTest {
  private val crashingText = "<âš«> \uD83D\uDC48\uD83C\uDFFB \u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E \u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E \u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E \u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E \u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E \u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E \u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E \u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E \u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F \u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u200E\u200F\u2067\u202E"

  @Test
  fun removeCrashableCharacters() {
    val result = AndroidCrashFixer.removeCrashableCharacters(crashingText)
    assertFalse(Regex("\u200F\\s*\u200E").containsMatchIn(result))
    assertFalse(Regex("\u200E\\s*\u200F").containsMatchIn(result))
  }
}
